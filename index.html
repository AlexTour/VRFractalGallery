<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fractal Cosmos: An Immersive VR Gallery</title>
  <meta name="description" content="Dive into infinite fractal worlds where mathematics meets art in a symphony of colors and sounds.">
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="Assets/favicon.png">
  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://alextour.github.io/VRFractalGallery/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Fractal Cosmos: An Immersive VR Gallery">
  <meta property="og:description" content="Embark on an audiovisual journey through endless fractal landscapes, discovering beauty in chaos and harmony in nature.">
  <meta property="og:image" content="https://opengraph.b-cdn.net/production/documents/87d018a3-34b3-4fae-afb8-efd48e71ae99.png?token=0SJ6lVqrkGYmM_F2urP1oTc3HqRb1_spiTRhgDBCW94&height=627&width=1200&expires=33241777252">
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="alextour.github.io">
  <meta property="twitter:url" content="https://alextour.github.io/VRFractalGallery/">
  <meta name="twitter:title" content="Fractal Cosmos: An Immersive VR Gallery">
  <meta name="twitter:description" content="Embark on an audiovisual journey through endless fractal landscapes, discovering beauty in chaos and harmony in nature.">
  <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/documents/87d018a3-34b3-4fae-afb8-efd48e71ae99.png?token=0SJ6lVqrkGYmM_F2urP1oTc3HqRb1_spiTRhgDBCW94&height=627&width=1200&expires=33241777252">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <!-- Google Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
  <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
  <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
  <!-- Image link template -->
  <script id="link" type="text/html">
    <a-entity class="link"
      geometry="primitive: plane; height: 0.5; width: 0.5"
      material="src: ${thumb}; magFilter: Linear; minFilter: Linear"
      transparent="true"
      opacity="0.9"
      alpha-test="0.5"
      animation="property: position; to: 0 0.05 0; dir: alternate; dur: 2000; easing: easeInOutSine; loop: true"
      animation__scalein="property: scale; to: 1.2 1.2 1; dur: 300; easing: easeOutQuad; startEvents: mouseenter, touchstart"
      animation__scaleout="property: scale; to: 1 1 1; dur: 300; easing: easeOutQuad; startEvents: mouseleave, touchend"
      event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
      proxy-event="event: click; to: #image-360; as: fade"
      sound="on: click; src: #click-sound"></a-entity>
  </script>
  <style>
    /* Fullscreen overlay with edgy frosted glass background */
    #overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(10, 10, 10, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      text-align: center;
      font-family: 'Roboto', sans-serif;
      z-index: 9999;
      transition: opacity 1.5s ease-in-out;
      padding: 20px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      overflow: hidden;
    }
    #overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
    /* Particle background for dynamic effect */
    #particles {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      z-index: -1;
    }
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      animation: float 10s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); opacity: 0.3; }
      50% { transform: translateY(-20px); opacity: 0.6; }
    }
    #overlay h1 {
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 15px;
      letter-spacing: 2px;
      text-transform: uppercase;
      background: linear-gradient(45deg, #e91e63, #00e5ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: pulse 2s infinite ease-in-out;
    }
    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 10px rgba(233, 30, 99, 0.5); }
      50% { text-shadow: 0 0 20px rgba(233, 30, 99, 0.8); }
    }
    #overlay p {
      font-size: 1.2em;
      font-weight: 300;
      max-width: 600px;
      margin: 10px 20px;
      line-height: 1.5;
    }
    #overlay ul {
      list-style: none;
      padding: 0;
      max-width: 600px;
      text-align: left;
    }
    #overlay li {
      font-size: 1.1em;
      margin: 10px 0;
      display: flex;
      align-items: center;
    }
    #overlay li .material-symbols-outlined {
      font-size: 24px;
      margin-right: 10px;
      color: #00e5ff;
    }
    #overlay #headphonesText {
      font-size: 0.9em;
      font-weight: 300;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 15px;
    }
    #overlay button {
      padding: 12px 24px;
      font-size: 1.2em;
      font-weight: 400;
      margin-top: 20px;
      background: #e91e63;
      color: white;
      border: 2px solid #ffffff33;
      border-radius: 0;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
      box-shadow: 0 0 15px rgba(233, 30, 99, 0.5);
      animation: buttonPulse 2s infinite ease-in-out;
    }
    @keyframes buttonPulse {
      0%, 100% { box-shadow: 0 0 15px rgba(233, 30, 99, 0.5); }
      50% { box-shadow: 0 0 25px rgba(233, 30, 99, 0.8); }
    }
    #overlay button:hover {
      background: #c2185b;
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(233, 30, 99, 0.7);
    }
    /* Language, Mute, and Rotation Toggle Buttons */
    #languageBtn, #muteBtn, #rotationBtn {
      position: fixed;
      top: 20px;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #ffffff33;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
      z-index: 10000;
      font-family: 'Roboto', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: white;
    }
    #languageBtn {
      right: 140px;
    }
    #muteBtn {
      right: 80px;
    }
    #rotationBtn {
      right: 20px;
    }
    #languageBtn:hover, #muteBtn:hover, #rotationBtn:hover {
      background: rgba(0, 0, 0, 0.9);
      transform: scale(1.1);
    }
    #muteBtn .material-symbols-outlined, #rotationBtn .material-symbols-outlined {
      font-size: 24px;
      color: white;
    }
    /* Smartphone compatibility */
    @media (max-width: 600px) {
      #overlay h1 {
        font-size: 1.8em;
        letter-spacing: 1px;
      }
      #overlay p {
        font-size: 1em;
        max-width: 90%;
      }
      #overlay li {
        font-size: 1em;
      }
      #overlay #headphonesText {
        font-size: 0.8em;
      }
      #overlay button {
        font-size: 1em;
        padding: 10px 20px;
        width: 80%;
        max-width: 300px;
      }
      #languageBtn, #muteBtn, #rotationBtn {
        width: 40px;
        height: 40px;
      }
      #languageBtn {
        font-size: 14px;
        right: 125px;
      }
      #muteBtn {
        right: 70px;
      }
      #rotationBtn {
        right: 15px;
      }
      #muteBtn .material-symbols-outlined, #rotationBtn .material-symbols-outlined {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Overlay / Welcome screen -->
  <div id="overlay">
    <div id="particles"></div>
    <h1 id="welcomeTitle">Welcome to Fractal Cosmos</h1>
    <p id="welcomeText">Dive into an immersive 360 gallery where fractals reveal order in chaos. Experience infinite landscapes that blend mathematics, art, and sound into a mesmerizing audiovisual journey.</p>
    <ul id="instructions">
      <li><span class="material-symbols-outlined">gesture</span><span id="rotateText">Rotate to look around the 360 environment.</span></li>
      <li><span class="material-symbols-outlined">ads_click</span><span id="selectText">Select thumbnail images to switch between fractal worlds.</span></li>
      <li><span class="material-symbols-outlined">volume_up</span><span id="muteText">Use the mute button (top right) to toggle audio on/off.</span></li>
      <li><span class="material-symbols-outlined">rotate_90_degrees_ccw</span><span id="rotationText">Use the rotation button (top right) to toggle sky rotation on/off.</span></li>
    </ul>
    <p id="headphonesText">Wear headphones for an immersive soundscape.</p>
    <button id="enterBtn">Enter the Gallery</button>
  </div>
  <!-- Language Toggle Button -->
  <button id="languageBtn" title="Switch to Greek">ΕΛ</button>
  <!-- Mute/Unmute Button -->
  <button id="muteBtn" title="Toggle Audio">
    <span class="material-symbols-outlined">volume_up</span>
  </button>
  <!-- Rotation Toggle Button -->
  <button id="rotationBtn" title="Toggle Sky Rotation">
    <span class="material-symbols-outlined">rotate_90_degrees_ccw</span>
  </button>
  <a-scene loading-screen="backgroundColor: black;">
    <a-assets timeout="30000">
      <!-- 360 images -->
      <img id="calabriabnw" crossorigin="anonymous" src="Assets/calabriabnw.jpg">
      <img id="architect" crossorigin="anonymous" src="Assets/architect.jpg">
      <img id="architect2" crossorigin="anonymous" src="Assets/architect2.jpg">
      <img id="citypurple" crossorigin="anonymous" src="Assets/citypurple.jpg">
      <img id="miraduro" crossorigin="anonymous" src="Assets/miraduro.jpg">
      <img id="aquarium" crossorigin="anonymous" src="Assets/aquarium360REDUCED.jpg">
      <img id="calabriaColor" crossorigin="anonymous" src="Assets/calabriaREDUCED.jpg">
      <img id="circus" crossorigin="anonymous" src="Assets/circusREDUCED.jpg">
      <img id="mindyourtrippy" crossorigin="anonymous" src="Assets/mindyourtrippy360REDUCED.jpg">
      <img id="pinkturqouise" crossorigin="anonymous" src="Assets/pinkturqouiseREDUCED.jpg">
      <!-- Thumbnails -->
      <img id="thumb-calabriabnw" crossorigin="anonymous" src="Assets/thumb-calabriabnw.png">
      <img id="thumb-architect" crossorigin="anonymous" src="Assets/thumb-architect.png">
      <img id="thumb-architect2" crossorigin="anonymous" src="Assets/thumb-architect2.png">
      <img id="thumb-citypurple" crossorigin="anonymous" src="Assets/thumb-citypurple.png">
      <img id="thumb-miraduro" crossorigin="anonymous" src="Assets/thumb-miraduro.png">
      <img id="thumb-aquarium" crossorigin="anonymous" src="Assets/thumb-aquarium.png">
      <img id="thumb-calabria" crossorigin="anonymous" src="Assets/thumb-calabria.png">
      <img id="thumb-circus" crossorigin="anonymous" src="Assets/thumb-circus.png">
      <img id="thumb-mindyourtrippy" crossorigin="anonymous" src="Assets/thumb-mindyourtrippy.png">
      <img id="thumb-pinkturqouise" crossorigin="anonymous" src="Assets/thumb-pinkturqouise.png">
      <!-- Poster -->
      <img id="posterA" crossorigin="anonymous" src="Assets/posterA.jpg">
      <img id="city-thumb" crossorigin="anonymous" src="Assets/infobox@2x.jpg">
      <!-- Audio -->
      <audio id="bgAudio" src="Assets/NeoGreenChamber.mp3" preload="auto" loop></audio>
      <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
    </a-assets>
    <!-- Audio entity with sound component -->
    <a-entity id="background-audio" sound="src: #bgAudio; autoplay: false; loop: true; volume: 0"></a-entity>
    <a-sky id="image-360" radius="10" src="#architect" material="magFilter: Linear; minFilter: Linear" animation="property: rotation; to: 0 360 0; dur: 150000; easing: linear; loop: true"></a-sky>
    <a-entity id="links" position="0 -1 -3">
      <a-entity template="src: #link" data-src="#architect" data-thumb="#thumb-architect" position="-1.5 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#architect2" data-thumb="#thumb-architect2" position="-0.75 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#citypurple" data-thumb="#thumb-citypurple" position="0 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#calabriabnw" data-thumb="#thumb-calabriabnw" position="0.75 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#miraduro" data-thumb="#thumb-miraduro" position="1.5 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#aquarium" data-thumb="#thumb-aquarium" position="-1.5 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#calabriaColor" data-thumb="#thumb-calabria" position="-0.75 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#circus" data-thumb="#thumb-circus" position="0 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#mindyourtrippy" data-thumb="#thumb-mindyourtrippy" position="0.75 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#pinkturqouise" data-thumb="#thumb-pinkturqouise" position="1.5 0.25 0"></a-entity>
    </a-entity>
    <!-- Camera + custom cursor -->
    <a-entity camera look-controls>
      <a-cursor
        id="cursor"
        fuse="true"
        fuse-timeout="1500"
        geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
        material="color: #ffffff; shader: flat"
        animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150; easing: easeOutQuad"
        animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500; easing: easeInOutQuad"
        event-set__mouseenter="_event: mouseenter; material.color: #00ffff"
        event-set__mouseleave="_event: mouseleave; material.color: #ffffff"
        raycaster="objects: .link"></a-cursor>
      <!-- Ray visual -->
      <a-entity line="start: 0 0 0; end: 0 0 -5; color: #ffffff; opacity: 0.5"
                event-set__mouseenter="_event: mouseenter; color: #00ffff; opacity: 0.8"
                event-set__mouseleave="_event: mouseleave; color: #ffffff; opacity: 0.5"></a-entity>
    </a-entity>
  </a-scene>
  <script>
    window.addEventListener("load", () => {
      const overlay = document.getElementById("overlay");
      const enterBtn = document.getElementById("enterBtn");
      const muteBtn = document.getElementById("muteBtn");
      const rotationBtn = document.getElementById("rotationBtn");
      const languageBtn = document.getElementById("languageBtn");
      const audioEntity = document.getElementById("background-audio");
      const sky = document.getElementById("image-360");
      const particlesContainer = document.getElementById("particles");
      let isMuted = false;
      let isRotating = true let currentLanguage = 'en';

      // Language translations
      const translations = {
        en: {
          welcomeTitle: 'Welcome to Fractal Cosmos',
          welcomeText: 'Dive into an immersive 360 gallery where fractals reveal order in chaos. Experience infinite landscapes that blend mathematics, art, and sound into a mesmerizing audiovisual journey.',
          rotateText: 'Rotate to look around the 360 environment.',
          selectText: 'Select thumbnail images to switch between fractal worlds.',
          muteText: 'Use the mute button (top right) to toggle audio on/off.',
          rotationText: 'Use the rotation button (top right) to toggle sky rotation on/off.',
          headphonesText: 'Wear headphones for an immersive soundscape.',
          enterBtn: 'Enter the Gallery',
          muteBtnTitle: 'Toggle Audio',
          rotationBtnTitle: 'Toggle Sky Rotation',
          languageBtnTitle: 'Switch to Greek'
        },
        el: {
          welcomeTitle: 'Καλώς ήρθατε στο Fractal Cosmos',
          welcomeText: 'Βυθιστείτε σε μια καθηλωτική γκαλερί 360° όπου τα φράκταλ αποκαλύπτουν τάξη μέσα στο χάος. Ζήστε ατέλειωτα τοπία που συνδυάζουν μαθηματικά, τέχνη και ήχο σε ένα μαγευτικό οπτικοακουστικό ταξίδι.',
          rotateText: 'Περιστρέψτε για να κοιτάξετε γύρω σας στο περιβάλλον 360°.',
          selectText: 'Επιλέξτε μικρογραφίες εικόνων για να αλλάξετε μεταξύ φράκταλ κόσμων.',
          muteText: 'Χρησιμοποιήστε το κουμπί σίγασης (πάνω δεξιά) για να ενεργοποιήσετε/απενεργοποιήσετε τον ήχο.',
          rotationText: 'Χρησιμοποιήστε το κουμπί περιστροφής (πάνω δεξιά) για να ενεργοποιήσετε/απενεργοποιήσετε την περιστροφή του ουρανού.',
          headphonesText: 'Φορέστε ακουστικά για μια καθηλωτική ηχητική εμπειρία.',
          enterBtn: 'Είσοδος στη Γκαλερί',
          muteBtnTitle: 'Εναλλαγή Ήχου',
          rotationBtnTitle: 'Εναλλαγή Περιστροφής Ουρανού',
          languageBtnTitle: 'Switch to English'
        }
      };

      // Update language
      function updateLanguage(lang) {
        currentLanguage = lang;
        document.getElementById('welcomeTitle').textContent = translations[lang].welcomeTitle;
        document.getElementById('welcomeText').textContent = translations[lang].welcomeText;
        document.getElementById('rotateText').textContent = translations[lang].rotateText;
        document.getElementById('selectText').textContent = translations[lang].selectText;
        document.getElementById('muteText').textContent = translations[lang].muteText;
        document.getElementById('rotationText').textContent = translations[lang].rotationText;
        document.getElementById('headphonesText').textContent = translations[lang].headphonesText;
        document.getElementById('enterBtn').textContent = translations[lang].enterBtn;
        muteBtn.setAttribute('title', translations[lang].muteBtnTitle);
        rotationBtn.setAttribute('title', translations[lang].rotationBtnTitle);
        languageBtn.setAttribute('title', translations[lang].languageBtnTitle);
        languageBtn.textContent = lang === 'en' ? 'ΕΛ' : 'EN';
      }

      // Create particle effect (10 particles)
      function createParticles() {
        for (let i = 0; i < 10; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.width = `${Math.random() * 3 + 1}px`;
          particle.style.height = particle.style.width;
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.top = `${Math.random() * 100}%`;
          particle.style.animationDelay = `${Math.random() * 5}s`;
          particlesContainer.appendChild(particle);
        }
      }
      createParticles();

      // Start audio with fade-in
      function startAudio() {
        audioEntity.components.sound.playSound();
        const targetVolume = 0.4;
        const fadeDuration = 2000;
        const intervalTime = 50;
        const step = targetVolume / (fadeDuration / intervalTime);
        let currentVolume = 0;

        const fadeInterval = setInterval(() => {
          if (currentVolume < targetVolume) {
            currentVolume = Math.min(currentVolume + step, targetVolume);
            audioEntity.setAttribute('sound', 'volume', isMuted ? 0 : currentVolume);
          } else {
            clearInterval(fadeInterval);
          }
        }, intervalTime);
      }

      // Mute/Unmute toggle
      muteBtn.addEventListener("click", () => {
        isMuted = !isMuted;
        audioEntity.setAttribute('sound', 'volume', isMuted ? 0 : 0.4);
        muteBtn.innerHTML = `<span class="material-symbols-outlined">${isMuted ? 'volume_off' : 'volume_up'}</span>`;
        muteBtn.setAttribute('title', translations[currentLanguage].muteBtnTitle);
      });

      // Rotation toggle
      rotationBtn.addEventListener("click", () => {
        isRotating = !isRotating;
        if (isRotating) {
          sky.removeAttribute('animation');
          sky.setAttribute('animation', {
            property: 'rotation',
            to: '0 360 0',
            dur: 150000,
            easing: 'linear',
            loop: true
          });
          rotationBtn.innerHTML = `<span class="material-symbols-outlined">rotate_90_degrees_ccw</span>`;
        } else {
          sky.components.animation.pause();
          rotationBtn.innerHTML = `<span class="material-symbols-outlined">pause_circle</span>`;
        }
        rotationBtn.setAttribute('title', translations[currentLanguage].rotationBtnTitle);
      });

      // Language toggle
      languageBtn.addEventListener("click", () => {
        const newLang = currentLanguage === 'en' ? 'el' : 'en';
        updateLanguage(newLang);
      });

      // Enter button click
      enterBtn.addEventListener("click", () => {
        overlay.classList.add("hidden");
        setTimeout(() => { overlay.style.display = "none"; }, 1500);
        startAudio();
      });

      // Handle sky texture errors
      sky.addEventListener('materialtextureerror', () => {
        console.warn('Sky texture failed to load, setting fallback');
        sky.setAttribute('src', '#calabriabnw');
      });

      // Handle audio errors after scene load
      document.querySelector('a-scene').addEventListener('loaded', () => {
        if (audioEntity.components.sound && audioEntity.components.sound.audio) {
          audioEntity.components.sound.audio.addEventListener('error', (err) => {
            console.error("Audio playback failed:", err);
          });
        } else {
          console.warn("Sound component not initialized.");
        }
      });

      // Smooth sky transition on image change
      AFRAME.registerComponent('fade', {
        init: function () {
          this.el.addEventListener('fade', () => {
            this.el.setAttribute('animation', {
              property: 'material.opacity',
              from: 0,
              to: 1,
              dur: 1000,
              easing: 'easeInOutQuad'
            });
          });
        }
      });

      // Initialize language
      updateLanguage('en');
    });
  </script>
</body>
</html>
