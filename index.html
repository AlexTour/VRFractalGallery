<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Fractal Cosmos: a VR Gallery</title>
  <meta name="description" content="Fractal Cosmos: a VR Gallery">

  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
  <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
  <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>

  <style>
    /* Fullscreen overlay with GIF background */
    #overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: black url('Assets/output_prRz0G.gif') center center no-repeat;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      z-index: 9999;
    }
    #overlay img {
      max-width: 300px;
      margin-bottom: 20px;
    }
    #overlay button {
      padding: 12px 24px;
      font-size: 18px;
      margin-top: 20px;
      cursor: pointer;
    }
    #overlay.hidden {
      opacity: 0;
      transition: opacity 1s;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <!-- Overlay / Loading screen -->
  <div id="overlay">
    <img src="Assets/posterA.jpg" alt="Poster Image">
    <h2>For the best experience</h2>
    <p>Please wear headphones ðŸŽ§</p>
    <button id="enterBtn">Tap to Enter Gallery</button>
  </div>

  <a-scene loading-screen="backgroundColor: black;">
    <a-assets>
      <!-- 360 images -->
      <img id="calabriabnw" crossorigin="anonymous" src="Assets/calabriabnw.jpg">
      <img id="architect" crossorigin="anonymous" src="Assets/architect.jpg">
      <img id="architect2" crossorigin="anonymous" src="Assets/architect2.jpg">
      <img id="citypurple" crossorigin="anonymous" src="Assets/citypurple.jpg">
      <img id="miraduro" crossorigin="anonymous" src="Assets/miraduro.jpg">
      <img id="aquarium" crossorigin="anonymous" src="Assets/aquarium360REDUCED.jpg">
      <img id="calabriaColor" crossorigin="anonymous" src="Assets/calabriaREDUCED.jpg">
      <img id="circus" crossorigin="anonymous" src="Assets/circusREDUCED.jpg">
      <img id="mindyourtrippy" crossorigin="anonymous" src="Assets/mindyourtrippy360REDUCED.jpg">
      <img id="pinkturqouise" crossorigin="anonymous" src="Assets/pinkturqouiseREDUCED.jpg">

      <!-- Thumbnails -->
      <img id="thumb-calabriabnw" crossorigin="anonymous" src="Assets/thumb-calabriabnw.png">
      <img id="thumb-architect" crossorigin="anonymous" src="Assets/thumb-architect.png">
      <img id="thumb-architect2" crossorigin="anonymous" src="Assets/thumb-architect2.png">
      <img id="thumb-citypurple" crossorigin="anonymous" src="Assets/thumb-citypurple.png">
      <img id="thumb-miraduro" crossorigin="anonymous" src="Assets/thumb-miraduro.png">
      <img id="thumb-aquarium" crossorigin="anonymous" src="Assets/thumb-aquarium.png">
      <img id="thumb-calabria" crossorigin="anonymous" src="Assets/thumb-calabria.png">
      <img id="thumb-circus" crossorigin="anonymous" src="Assets/thumb-circus.png">
      <img id="thumb-mindyourtrippy" crossorigin="anonymous" src="Assets/thumb-mindyourtrippy.png">
      <img id="thumb-pinkturqouise" crossorigin="anonymous" src="Assets/thumb-pinkturqouise.png">

      <!-- Poster -->
      <img id="posterA" crossorigin="anonymous" src="Assets/posterA.jpg">

      <!-- Audio -->
      <audio id="audio1" src="Assets/NeoGreenChamber.mp3" preload="auto"></audio>

      <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
    </a-assets>

    <a-sky id="image-360" radius="10" src="#architect"></a-sky>

    <a-entity id="links" position="0 -1 -3">
        <a-entity template="src: #link" data-src="#architect" data-thumb="#thumb-architect" position="-1.5 1 0"></a-entity>
        <a-entity template="src: #link" data-src="#architect2" data-thumb="#thumb-architect2" position="-0.75 1 0"></a-entity>
        <a-entity template="src: #link" data-src="#citypurple" data-thumb="#thumb-citypurple" position="0 1 0"></a-entity>
        <a-entity template="src: #link" data-src="#calabriabnw" data-thumb="#thumb-calabriabnw" position="0.75 1 0"></a-entity>
        <a-entity template="src: #link" data-src="#miraduro" data-thumb="#thumb-miraduro" position="1.5 1 0"></a-entity>

        <a-entity template="src: #link" data-src="#aquarium" data-thumb="#thumb-aquarium" position="-1.5 0.25 0"></a-entity>
        <a-entity template="src: #link" data-src="#calabriaColor" data-thumb="#thumb-calabria" position="-0.75 0.25 0"></a-entity>
        <a-entity template="src: #link" data-src="#circus" data-thumb="#thumb-circus" position="0 0.25 0"></a-entity>
        <a-entity template="src: #link" data-src="#mindyourtrippy" data-thumb="#thumb-mindyourtrippy" position="0.75 0.25 0"></a-entity>
        <a-entity template="src: #link" data-src="#pinkturqouise" data-thumb="#thumb-pinkturqouise" position="1.5 0.25 0"></a-entity>
    </a-entity>


    <a-entity camera look-controls>
      <a-cursor id="cursor"
                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                event-set__mouseenter="_event: mouseenter; color: springgreen"
                event-set__mouseleave="_event: mouseleave; color: black"
                raycaster="objects: .link"></a-cursor>
    </a-entity>
  </a-scene>

  <script>
    window.addEventListener("load", () => {
      const overlay = document.getElementById("overlay");
      const btn = document.getElementById("enterBtn");
      const audio1 = document.getElementById("audio1");

      btn.addEventListener("click", () => {
        overlay.classList.add("hidden");
        setTimeout(() => { overlay.style.display = "none"; }, 1000);

        // Play the single audio and loop
        audio1.loop = true;
        audio1.volume = 0.7;
        audio1.play().catch(err => console.log("Audio playback failed:", err));
      });
    });
  </script>
</body>
</html>
