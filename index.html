<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fractal Cosmos: An Immersive VR Gallery</title>
  <meta name="description" content="Dive into infinite fractal worlds where mathematics meets art in a symphony of colors and sounds.">
  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://alextour.github.io/VRFractalGallery/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Fractal Cosmos: An Immersive VR Gallery">
  <meta property="og:description" content="Embark on an audiovisual journey through endless fractal landscapes, discovering beauty in chaos and harmony in nature.">
  <meta property="og:image" content="https://opengraph.b-cdn.net/production/documents/87d018a3-34b3-4fae-afb8-efd48e71ae99.png?token=0SJ6lVqrkGYmM_F2urP1oTc3HqRb1_spiTRhgDBCW94&height=627&width=1200&expires=33241777252">
  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="alextour.github.io">
  <meta property="twitter:url" content="https://alextour.github.io/VRFractalGallery/">
  <meta name="twitter:title" content="Fractal Cosmos: An Immersive VR Gallery">
  <meta name="twitter:description" content="Embark on an audiovisual journey through endless fractal landscapes, discovering beauty in chaos and harmony in nature.">
  <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/documents/87d018a3-34b3-4fae-afb8-efd48e71ae99.png?token=0SJ6lVqrkGYmM_F2urP1oTc3HqRb1_spiTRhgDBCW94&height=627&width=1200&expires=33241777252">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <!-- Google Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
  <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
  <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
  <!-- Image link template -->
  <script id="link" type="text/html">
    <a-entity class="link"
      geometry="primitive: plane; height: 0.5; width: 0.5"
      material="src: ${thumb}"
      transparent="true"
      opacity="0.9"
      alpha-test="0.5"
      animation__scalein="property: scale; to: 1.2 1.2 1; dur: 300; easing: easeOutQuad; startEvents: mouseenter"
      animation__scaleout="property: scale; to: 1 1 1; dur: 300; easing: easeOutQuad; startEvents: mouseleave"
      event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
      proxy-event="event: click; to: #image-360; as: fade"
      sound="on: click; src: #click-sound"></a-entity>
  </script>
  <style>
    /* Fullscreen overlay with frosted glass background */
    #overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.7) url('Assets/output_prRz0G.gif') center center no-repeat;
      background-size: cover;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      font-family: 'Roboto', sans-serif;
      z-index: 9999;
      transition: opacity 1.5s ease-in-out;
      padding: 20px;
    }
    #overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
    #overlay img {
      max-width: 300px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    #overlay h1 {
      font-size: 2.5em;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    #overlay p {
      font-size: 1.2em;
      font-weight: 300;
      max-width: 600px;
      margin: 10px 20px;
    }
    #overlay button {
      padding: 12px 24px;
      font-size: 1.2em;
      font-weight: 400;
      margin-top: 20px;
      background: #1e88e5;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    #overlay button:hover {
      background: #1565c0;
      transform: scale(1.05);
    }
    /* Mute/Unmute button */
    #muteBtn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.7);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s ease;
      z-index: 10000;
    }
    #muteBtn:hover {
      background: rgba(0, 0, 0, 0.9);
    }
    #muteBtn .material-symbols-outlined {
      font-size: 24px;
      color: white;
    }
    /* Smartphone compatibility */
    @media (max-width: 600px) {
      #overlay h1 {
        font-size: 1.8em;
      }
      #overlay p {
        font-size: 1em;
        max-width: 90%;
      }
      #overlay img {
        max-width: 80%;
        width: 250px;
      }
      #overlay button {
        font-size: 1em;
        padding: 10px 20px;
        width: 80%;
        max-width: 300px;
      }
      #muteBtn {
        width: 40px;
        height: 40px;
      }
      #muteBtn .material-symbols-outlined {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Overlay / Welcome screen -->
  <div id="overlay">
    <img src="Assets/posterA.jpg" alt="Fractal Cosmos Poster">
    <h1>Welcome to Fractal Cosmos</h1>
    <p>Embark on an audiovisual journey through infinite fractal landscapes, where mathematics weaves art and sound into breathtaking patterns. Discover the beauty and harmony hidden within natureâ€™s chaos.</p>
    <p><strong>How to Explore:</strong> Use your mouse or tap/swipe on your phone to look around, or use a VR headset. Click or tap thumbnail images to switch between fractal worlds. Wear headphones for an immersive soundscape.</p>
    <button id="enterBtn">Enter the Gallery</button>
  </div>
  <!-- Mute/Unmute Button -->
  <button id="muteBtn" title="Toggle Audio">
    <span class="material-symbols-outlined">volume_up</span>
  </button>
  <a-scene loading-screen="backgroundColor: black;">
    <a-assets>
      <!-- 360 images -->
      <img id="calabriabnw" crossorigin="anonymous" src="Assets/calabriabnw.jpg">
      <img id="architect" crossorigin="anonymous" src="Assets/architect.jpg">
      <img id="architect2" crossorigin="anonymous" src="Assets/architect2.jpg">
      <img id="citypurple" crossorigin="anonymous" src="Assets/citypurple.jpg">
      <img id="miraduro" crossorigin="anonymous" src="Assets/miraduro.jpg">
      <img id="aquarium" crossorigin="anonymous" src="Assets/aquarium360REDUCED.jpg">
      <img id="calabriaColor" crossorigin="anonymous" src="Assets/calabriaREDUCED.jpg">
      <img id="circus" crossorigin="anonymous" src="Assets/circusREDUCED.jpg">
      <img id="mindyourtrippy" crossorigin="anonymous" src="Assets/mindyourtrippy360REDUCED.jpg">
      <img id="pinkturqouise" crossorigin="anonymous" src="Assets/pinkturqouiseREDUCED.jpg">
      <!-- Thumbnails -->
      <img id="thumb-calabriabnw" crossorigin="anonymous" src="Assets/thumb-calabriabnw.png">
      <img id="thumb-architect" crossorigin="anonymous" src="Assets/thumb-architect.png">
      <img id="thumb-architect2" crossorigin="anonymous" src="Assets/thumb-architect2.png">
      <img id="thumb-citypurple" crossorigin="anonymous" src="Assets/thumb-citypurple.png">
      <img id="thumb-miraduro" crossorigin="anonymous" src="Assets/thumb-miraduro.png">
      <img id="thumb-aquarium" crossorigin="anonymous" src="Assets/thumb-aquarium.png">
      <img id="thumb-calabria" crossorigin="anonymous" src="Assets/thumb-calabria.png">
      <img id="thumb-circus" crossorigin="anonymous" src="Assets/thumb-circus.png">
      <img id="thumb-mindyourtrippy" crossorigin="anonymous" src="Assets/thumb-mindyourtrippy.png">
      <img id="thumb-pinkturqouise" crossorigin="anonymous" src="Assets/thumb-pinkturqouise.png">
      <!-- Poster -->
      <img id="posterA" crossorigin="anonymous" src="Assets/posterA.jpg">
      <img id="city-thumb" crossorigin="anonymous" src="Assets/infobox@2x.jpg">
      <!-- Audio -->
      <audio id="bgAudio" src="Assets/NeoGreenChamber.mp3" preload="auto" loop></audio>
      <audio id="click-sound" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"></audio>
    </a-assets>
    <!-- Audio entity with sound component -->
    <a-entity id="background-audio" sound="src: #bgAudio; autoplay: false; loop: true; volume: 0"></a-entity>
    <a-sky id="image-360" radius="10" src="#architect" animation="property: material.opacity; to: 1; dur: 1000; easing: easeInOutQuad"></a-sky>
    <a-entity id="links" position="0 -1 -3">
      <a-entity template="src: #link" data-src="#architect" data-thumb="#thumb-architect" position="-1.5 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#architect2" data-thumb="#thumb-architect2" position="-0.75 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#citypurple" data-thumb="#thumb-citypurple" position="0 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#calabriabnw" data-thumb="#thumb-calabriabnw" position="0.75 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#miraduro" data-thumb="#thumb-miraduro" position="1.5 1 0"></a-entity>
      <a-entity template="src: #link" data-src="#aquarium" data-thumb="#thumb-aquarium" position="-1.5 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#calabriaColor" data-thumb="#thumb-calabria" position="-0.75 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#circus" data-thumb="#thumb-circus" position="0 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#mindyourtrippy" data-thumb="#thumb-mindyourtrippy" position="0.75 0.25 0"></a-entity>
      <a-entity template="src: #link" data-src="#pinkturqouise" data-thumb="#thumb-pinkturqouise" position="1.5 0.25 0"></a-entity>
    </a-entity>
    <!-- Camera + cursor -->
    <a-entity camera look-controls>
      <a-cursor
        id="cursor"
        animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150; easing: easeOutQuad"
        animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500; easing: easeInOutQuad"
        event-set__mouseenter="_event: mouseenter; color: springgreen"
        event-set__mouseleave="_event: mouseleave; color: black"
        raycaster="objects: .link"></a-cursor>
    </a-entity>
  </a-scene>
  <script>
    window.addEventListener("load", () => {
      const overlay = document.getElementById("overlay");
      const enterBtn = document.getElementById("enterBtn");
      const muteBtn = document.getElementById("muteBtn");
      const audioEntity = document.getElementById("background-audio");
      let isMuted = false;

      // Start audio with fade-in
      function startAudio() {
        audioEntity.components.sound.playSound();
        const targetVolume = 0.7;
        const fadeDuration = 2000;
        const intervalTime = 50;
        const step = targetVolume / (fadeDuration / intervalTime);
        let currentVolume = 0;

        const fadeInterval = setInterval(() => {
          if (currentVolume < targetVolume) {
            currentVolume = Math.min(currentVolume + step, targetVolume);
            audioEntity.setAttribute('sound', 'volume', isMuted ? 0 : currentVolume);
          } else {
            clearInterval(fadeInterval);
          }
        }, intervalTime);
      }

      // Mute/Unmute toggle
      muteBtn.addEventListener("click", () => {
        isMuted = !isMuted;
        audioEntity.setAttribute('sound', 'volume', isMuted ? 0 : 0.7);
        muteBtn.innerHTML = `<span class="material-symbols-outlined">${isMuted ? 'volume_off' : 'volume_up'}</span>`;
      });

      // Enter button click
      enterBtn.addEventListener("click", () => {
        overlay.classList.add("hidden");
        setTimeout(() => { overlay.style.display = "none"; }, 1500);
        startAudio();
      });

      // Handle audio errors
      audioEntity.components.sound.audio.addEventListener('error', (err) => {
        console.error("Audio playback failed:", err);
      });

      // Smooth sky transition on image change
      AFRAME.registerComponent('fade', {
        init: function () {
          this.el.addEventListener('fade', () => {
            this.el.setAttribute('animation', {
              property: 'material.opacity',
              from: 0,
              to: 1,
              dur: 1000,
              easing: 'easeInOutQuad'
            });
          });
        }
      });
    });
  </script>
</body>
</html>
